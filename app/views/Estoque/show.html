#{extends 'layout.html' /}
#{set 'title'}
&{'application.subtilte'} Consulta Estoque
#{/set}

<link rel="stylesheet" type="text/css" media="screen" href="&{'application.static.content'}/stylesheets/play-pagination.css">
 
<div id="findEstoque" class="divFindProducts fontDefaultBlack">
	<form action="/pesquisarProdutoEstoque" accept-charset="UTF-8" id="searchProdutoEstoqueForm">
	<table border="0" width="100%" cellpadding="4" cellspacing="4">
		<tr>
			<td align="center" width="10%"><span><b>&{'application.form.find'}</b></span></td>
			<td align="left">
				<input type="text" name="produtoParametro" id="produtoParametro" size="30" />
				<input input type="button" value="Ok" onclick="javascript:pesquisarProduto(document.getElementById('produtoParametro'), 
																						document.getElementById('searchProdutoEstoqueForm'));" />
			</td>
		</tr>
		<tr>
			<td>&nbsp;</td>
			<td>
				<input type="radio" name="param" id="param" checked="checked" value="produto.nome"><span>&{'form.product.title'}</span>
				&nbsp;&nbsp;&nbsp;&nbsp;
				<input type="radio" name="param" id="param" value="produto.dataValidade"><span>&{'form.product.dataValidade'}</span>
			</td>
		</tr>
	</table>
	</form>
</div>
<br />
<br />
<div class="boxConsultaDefault">
	<table width="100%" cellpadding="1" cellspacing="0" border="0" class="fontGreen2">
		<tr class="tr1">
			<td align="center" width="5%">Id</td>
			<td align="center">&{'form.product.title'}</td>
			<td align="center" width="8%">Validade</td>
			<td align="center" width="10%">
				<a href="/estoque/order/quantidade/1" title="Ordernar" class="a1">&{'form.label.quantidade'}</a>
			</td>
			<td align="center" width="12%">&{'form.global.price'}</td>
			<td align="center" width="16%">&{'form.admin.mypage.date'}</td>
			<td align="center" width="16%">&{'form.estoque.date.lastUpdate'}</td>
			<td align="center" width="10%">&{'form.estoque.user.lastUpdate'}</td>
			<td align="center" width="10%">&{'form.label.status'}</td>
		</tr>
		<tr>
			<td colspan="10">
				<div style="position:relative; height: 340px; overflow: auto;">
					<table width="100%" border="0" cellpadding="2">
					#{paginate.list items:posicaoEstoque, as:'estoque'}
					<tr class="${produto_parity}">
						<td width="5%" align="center">
							<a href="/estoque/editar/${estoque.id}" class="a1" title="Editar">
								<span>${estoque.id}</span>
							</a>
						</td>
						<td align="left">
							<span title="${estoque.produto?.nome}">${estoque.produto?.nome.substring(0, 15)}...</span>
						</td>
						<td width="8%" align="left">${estoque.produto?.dataValidade?.format('dd/MM/yyyy')}</td>
						<td width="10%" align="center">${estoque.quantidade}</td>
						<td width="12%" align="center">${estoque.preco.formatCurrency('BRL').raw()}</td>
						<td width="15%" align="left">${new Date(estoque.dataCadastro.getTime()).format('dd/MM/yyyy HH:mm')}</td>
						<td width="15%" align="left">
							#{if (estoque.dataAlteracao!=null)}
								${new Date(estoque.dataAlteracao.getTime()).format('dd/MM/yyyy HH:mm')}
							#{/if}
						<td width="10%" align="left">
							<span title="${estoque.usuarioAlteracao}">${estoque.usuarioAlteracao.substring(0, 9)}...</span>
						</td>
						<td width="10%" align="center">
							<a href="/estoque/changestatus/${estoque.id}" class="a1">
								${estoque.ativo ? 'Ativo' : 'Inativo'}
							</a>
						</td>
					</tr>
					#{/paginate.list}
					</table>
				</div>
			</td
		</tr>
		<tr class="tr1">
			<td colspan="4" align="center">#{paginate.summary items:posicaoEstoque /}</td>
			<td colspan="6" align="center">#{paginate.controls items:posicaoEstoque /}</td>
		</tr>
	</table>
</div>
<br />